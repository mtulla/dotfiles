FROM ubuntu:22.04

ENV DEBIAN_FRONTEND=noninteractive
ENV TZ=Etc/UTC

# Create a non-root user with passwordless sudo.
# Install curl and git upfront â€” chezmoi init needs both.
RUN apt-get update && \
    apt-get install -y sudo curl git tzdata && \
    useradd -m -s /bin/bash testuser && \
    echo "testuser ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

USER testuser
WORKDIR /home/testuser

CMD ["sh", "-c", "curl -fsLS get.chezmoi.io | sh -s -- init --apply --branch testing mtulla"]
